<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>A Minimal Book Example</title>
  <meta name="description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook.">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="A Minimal Book Example" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="A Minimal Book Example" />
  
  <meta name="twitter:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  

<meta name="author" content="Yihui Xie">


<meta name="date" content="2018-05-01">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="index.html">
<link rel="next" href="transformacion-ii.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Prerequisites</a></li>
<li class="chapter" data-level="2" data-path="transformacion-i.html"><a href="transformacion-i.html"><i class="fa fa-check"></i><b>2</b> Transformación-I</a><ul>
<li class="chapter" data-level="2.1" data-path="transformacion-i.html"><a href="transformacion-i.html#que-aprendimos-la-clase-pasada"><i class="fa fa-check"></i><b>2.1</b> ¿Qué aprendimos la clase pasada?</a></li>
<li class="chapter" data-level="2.2" data-path="transformacion-i.html"><a href="transformacion-i.html#esta-clase"><i class="fa fa-check"></i><b>2.2</b> Esta clase:</a></li>
<li class="chapter" data-level="2.3" data-path="transformacion-i.html"><a href="transformacion-i.html#esta-seccion-del-curso-se-compone-por-dos-clases.-en-la-siguiente"><i class="fa fa-check"></i><b>2.3</b> Esta sección del curso se compone por dos clases. En la siguiente:</a></li>
<li class="chapter" data-level="2.4" data-path="transformacion-i.html"><a href="transformacion-i.html#conceptos-preliminares"><i class="fa fa-check"></i><b>2.4</b> Conceptos preliminares:</a><ul>
<li class="chapter" data-level="2.4.1" data-path="transformacion-i.html"><a href="transformacion-i.html#r-como-una-calculadora"><i class="fa fa-check"></i><b>2.4.1</b> R como una calculadora</a></li>
<li class="chapter" data-level="2.4.2" data-path="transformacion-i.html"><a href="transformacion-i.html#asignacion-de-objetos-en-r"><i class="fa fa-check"></i><b>2.4.2</b> Asignación de objetos en R</a></li>
<li class="chapter" data-level="2.4.3" data-path="transformacion-i.html"><a href="transformacion-i.html#funciones-en-r"><i class="fa fa-check"></i><b>2.4.3</b> Funciones en R</a></li>
<li class="chapter" data-level="2.4.4" data-path="transformacion-i.html"><a href="transformacion-i.html#scripts-en-r"><i class="fa fa-check"></i><b>2.4.4</b> Scripts en R</a></li>
<li class="chapter" data-level="2.4.5" data-path="transformacion-i.html"><a href="transformacion-i.html#diagnosticos-de-rstudio"><i class="fa fa-check"></i><b>2.4.5</b> Diagnósticos de RStudio</a></li>
<li class="chapter" data-level="2.4.6" data-path="transformacion-i.html"><a href="transformacion-i.html#operadores-relacionales"><i class="fa fa-check"></i><b>2.4.6</b> Operadores relacionales</a></li>
<li class="chapter" data-level="2.4.7" data-path="transformacion-i.html"><a href="transformacion-i.html#operadores-booleanos"><i class="fa fa-check"></i><b>2.4.7</b> Operadores booleanos</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="transformacion-i.html"><a href="transformacion-i.html#el-paquete-dplyr-instalado-con-el-tidyverse"><i class="fa fa-check"></i><b>2.5</b> El paquete dplyr (instalado con el tidyverse)</a><ul>
<li class="chapter" data-level="2.5.1" data-path="transformacion-i.html"><a href="transformacion-i.html#seleccionar-campos-de-un-data-frame-selectdf-columnas_a_seleccionar"><i class="fa fa-check"></i><b>2.5.1</b> 1. Seleccionar campos de un data frame: select(df, columnas_a_seleccionar)</a></li>
<li class="chapter" data-level="2.5.2" data-path="transformacion-i.html"><a href="transformacion-i.html#filtrar-registros-de-un-data-frame-que-cumplen-cierta-condicion-filterdf-condiciones"><i class="fa fa-check"></i><b>2.5.2</b> 2. Filtrar registros de un data frame que cumplen cierta condición: filter(df, condiciones)</a></li>
<li class="chapter" data-level="2.5.3" data-path="transformacion-i.html"><a href="transformacion-i.html#ordenar-registros-de-un-data-frame-por-los-valores-en-una-o-mas-variables-arrangedf-variables_de_ordenamiento"><i class="fa fa-check"></i><b>2.5.3</b> 3. Ordenar registros de un data frame por los valores en una o más variables: arrange(df, variables_de_ordenamiento)</a></li>
<li class="chapter" data-level="2.5.4" data-path="transformacion-i.html"><a href="transformacion-i.html#crear-nuevas-variables-mutatedf-formulas"><i class="fa fa-check"></i><b>2.5.4</b> 4. Crear nuevas variables: mutate(df, formulas)</a></li>
<li class="chapter" data-level="2.5.5" data-path="transformacion-i.html"><a href="transformacion-i.html#agrupar-por-ciertas-variables-group_bydata_frame-variables-y-crear-resumenes-por-grupo-summarisedata_frame-formulas"><i class="fa fa-check"></i><b>2.5.5</b> 5. Agrupar por ciertas variables: group_by(data_frame, variables) y crear resúmenes por grupo: summarise(data_frame, formulas)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="transformacion-ii.html"><a href="transformacion-ii.html"><i class="fa fa-check"></i><b>3</b> Transformación-II</a><ul>
<li class="chapter" data-level="3.1" data-path="transformacion-ii.html"><a href="transformacion-ii.html#que-aprendimos-la-clase-pasada-1"><i class="fa fa-check"></i><b>3.1</b> ¿Qué aprendimos la clase pasada?</a></li>
<li class="chapter" data-level="3.2" data-path="transformacion-ii.html"><a href="transformacion-ii.html#el-operador-pipeline"><i class="fa fa-check"></i><b>3.2</b> El operador pipeline %&gt;%</a></li>
<li class="chapter" data-level="3.3" data-path="transformacion-ii.html"><a href="transformacion-ii.html#miscelanea-de-funcionalidades-avanzadas-de-transformacion-de-datos"><i class="fa fa-check"></i><b>3.3</b> Miscelánea de funcionalidades avanzadas de transformación de datos</a><ul>
<li class="chapter" data-level="3.3.1" data-path="transformacion-ii.html"><a href="transformacion-ii.html#joins-inner_joindf1-df2-columnas_a_seleccionar"><i class="fa fa-check"></i><b>3.3.1</b> 1. Joins: inner_join(df1, df2, columnas_a_seleccionar)</a></li>
<li class="chapter" data-level="3.3.2" data-path="transformacion-ii.html"><a href="transformacion-ii.html#un-intermedio.-lectura-de-datos-en-r"><i class="fa fa-check"></i><b>3.3.2</b> Un intermedio. Lectura de datos en R</a></li>
<li class="chapter" data-level="3.3.3" data-path="transformacion-ii.html"><a href="transformacion-ii.html#usar-spread-para-transformar-registros-de-un-data-frame-en-campos."><i class="fa fa-check"></i><b>3.3.3</b> 2. Usar spread para transformar registros de un data frame en campos.</a></li>
<li class="chapter" data-level="3.3.4" data-path="transformacion-ii.html"><a href="transformacion-ii.html#usar-gather-para-transformar-campos-de-un-data-frame-en-registros"><i class="fa fa-check"></i><b>3.3.4</b> 3. Usar gather para transformar campos de un data frame en registros</a></li>
<li class="chapter" data-level="3.3.5" data-path="transformacion-ii.html"><a href="transformacion-ii.html#separar-una-columna-en-dos-o-mas-separatedf-col-columna-into-cnueva_variable_1-nueva_variable_2-etc"><i class="fa fa-check"></i><b>3.3.5</b> 4. Separar una columna en dos o más: separate(df, col = columna, into = c(nueva_variable_1, nueva_variable_2, etc)</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="transformacion-ii.html"><a href="transformacion-ii.html#datos-faltantes"><i class="fa fa-check"></i><b>3.4</b> Datos faltantes</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="funciones.html"><a href="funciones.html"><i class="fa fa-check"></i><b>4</b> Funciones</a><ul>
<li class="chapter" data-level="4.1" data-path="funciones.html"><a href="funciones.html#que-aprendimos-la-clase-pasada-2"><i class="fa fa-check"></i><b>4.1</b> ¿Qué aprendimos la clase pasada?</a></li>
<li class="chapter" data-level="4.2" data-path="funciones.html"><a href="funciones.html#funciones-en-r-1"><i class="fa fa-check"></i><b>4.2</b> Funciones en R</a><ul>
<li class="chapter" data-level="4.2.1" data-path="funciones.html"><a href="funciones.html#cuando-es-conveniente-escribir-funciones"><i class="fa fa-check"></i><b>4.2.1</b> ¿Cuándo es conveniente escribir funciones?</a></li>
<li class="chapter" data-level="4.2.2" data-path="funciones.html"><a href="funciones.html#escribiendo-funciones-en-r"><i class="fa fa-check"></i><b>4.2.2</b> Escribiendo funciones en R</a></li>
<li class="chapter" data-level="4.2.3" data-path="funciones.html"><a href="funciones.html#expresiones-condicionales"><i class="fa fa-check"></i><b>4.2.3</b> Expresiones condicionales</a></li>
<li class="chapter" data-level="4.2.4" data-path="funciones.html"><a href="funciones.html#de-regreso-al-tidyverse"><i class="fa fa-check"></i><b>4.2.4</b> De regreso al tidyverse</a></li>
<li class="chapter" data-level="4.2.5" data-path="funciones.html"><a href="funciones.html#ambientes"><i class="fa fa-check"></i><b>4.2.5</b> Ambientes</a></li>
<li class="chapter" data-level="4.2.6" data-path="funciones.html"><a href="funciones.html#estilos-de-codigo-y-buenas-practicas"><i class="fa fa-check"></i><b>4.2.6</b> Estilos de código y buenas prácticas</a></li>
<li class="chapter" data-level="4.2.7" data-path="funciones.html"><a href="funciones.html#temas-avanzados-de-funciones-opcional"><i class="fa fa-check"></i><b>4.2.7</b> Temas avanzados de funciones (OPCIONAL)</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="funciones.html"><a href="funciones.html#las-funciones-pueden-llamarse-a-si-mismas."><i class="fa fa-check"></i><b>4.3</b> <em>Las funciones pueden llamarse a si mismas.</em></a></li>
<li class="chapter" data-level="4.4" data-path="funciones.html"><a href="funciones.html#las-funciones-pueden-regresar-funciones"><i class="fa fa-check"></i><b>4.4</b> <em>Las funciones pueden regresar funciones</em>:</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="vectores.html"><a href="vectores.html"><i class="fa fa-check"></i><b>5</b> Vectores</a><ul>
<li class="chapter" data-level="5.1" data-path="vectores.html"><a href="vectores.html#que-aprendimos-la-clase-pasada-3"><i class="fa fa-check"></i><b>5.1</b> ¿Qué aprendimos la clase pasada?</a></li>
<li class="chapter" data-level="5.2" data-path="vectores.html"><a href="vectores.html#vectores-listas-y-arreglos"><i class="fa fa-check"></i><b>5.2</b> Vectores, listas y arreglos</a></li>
<li class="chapter" data-level="5.3" data-path="vectores.html"><a href="vectores.html#iteracion-en-r"><i class="fa fa-check"></i><b>5.3</b> Iteración en R</a><ul>
<li class="chapter" data-level="5.3.1" data-path="vectores.html"><a href="vectores.html#iteracion-imperativa"><i class="fa fa-check"></i><b>5.3.1</b> Iteración imperativa</a></li>
<li class="chapter" data-level="5.3.2" data-path="vectores.html"><a href="vectores.html#iteracion-funcional"><i class="fa fa-check"></i><b>5.3.2</b> Iteración funcional</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="modelado.html"><a href="modelado.html"><i class="fa fa-check"></i><b>6</b> Modelado</a><ul>
<li class="chapter" data-level="6.1" data-path="modelado.html"><a href="modelado.html#que-aprendimos-la-clase-pasada-4"><i class="fa fa-check"></i><b>6.1</b> ¿Qué aprendimos la clase pasada?</a></li>
<li class="chapter" data-level="6.2" data-path="modelado.html"><a href="modelado.html#modelos"><i class="fa fa-check"></i><b>6.2</b> Modelos</a><ul>
<li class="chapter" data-level="6.2.1" data-path="modelado.html"><a href="modelado.html#generacion-de-hipotesis-vs-confirmacion-de-hipotesis"><i class="fa fa-check"></i><b>6.2.1</b> Generación de hipótesis vs confirmación de hipótesis</a></li>
<li class="chapter" data-level="6.2.2" data-path="modelado.html"><a href="modelado.html#especificacion-de-modelos"><i class="fa fa-check"></i><b>6.2.2</b> Especificación de modelos</a></li>
<li class="chapter" data-level="6.2.3" data-path="modelado.html"><a href="modelado.html#un-primer-modelo-simple"><i class="fa fa-check"></i><b>6.2.3</b> Un primer modelo simple</a></li>
<li class="chapter" data-level="6.2.4" data-path="modelado.html"><a href="modelado.html#un-modelo-sobre-datos-mas-interesantes"><i class="fa fa-check"></i><b>6.2.4</b> Un modelo sobre datos más interesantes</a></li>
<li class="chapter" data-level="6.2.5" data-path="modelado.html"><a href="modelado.html#visualizacion-de-predicciones"><i class="fa fa-check"></i><b>6.2.5</b> visualización de predicciones</a></li>
<li class="chapter" data-level="6.2.6" data-path="modelado.html"><a href="modelado.html#visualizacion-de-residuales"><i class="fa fa-check"></i><b>6.2.6</b> visualización de residuales</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">A Minimal Book Example</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="transformacion-i" class="section level1">
<h1><span class="header-section-number">Chapter 2</span> Transformación-I</h1>
<div id="que-aprendimos-la-clase-pasada" class="section level2">
<h2><span class="header-section-number">2.1</span> ¿Qué aprendimos la clase pasada?</h2>
<ul>
<li>Principios de visualización de datos utilizando el paquete ggplot2.</li>
<li>Un primer ejemplo de manipulación de datos (la función filter).</li>
</ul>
</div>
<div id="esta-clase" class="section level2">
<h2><span class="header-section-number">2.2</span> Esta clase:</h2>
<ul>
<li>Utilizar R como calculadora.</li>
<li>Asignar objetos a variables para poder utilizarlos después.</li>
<li>Estudiaremos la lógica de las funciones en R.</li>
<li>Utilizar scripts como archivos de texto donde apuntamos nuestro código.</li>
<li>Utilizaremos un paquete de R para manipulación de tablas de datos (<strong>data frames</strong>).</li>
</ul>
</div>
<div id="esta-seccion-del-curso-se-compone-por-dos-clases.-en-la-siguiente" class="section level2">
<h2><span class="header-section-number">2.3</span> Esta sección del curso se compone por dos clases. En la siguiente:</h2>
<ul>
<li>Aprenderemos a leer archivos de datos en nuestro espacio de trabajo de R.</li>
<li>Seguiremos trabajando con diversas técnicas para transformar y manipular datos.</li>
</ul>
</div>
<div id="conceptos-preliminares" class="section level2">
<h2><span class="header-section-number">2.4</span> Conceptos preliminares:</h2>
<div id="r-como-una-calculadora" class="section level3">
<h3><span class="header-section-number">2.4.1</span> R como una calculadora</h3>
<p>En la clase pasada omitimos algunos elementos básicos de R para lograr que pudiésemos comenzar a graficar lo más pronto posible.</p>
<p>Uno de esos elementos es que R puede llevar a cabo operaciones como una calculadora. La consola de R entiende expresiones matemáticas y las puede operar para obtener sus resultados.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">2</span><span class="op">+</span><span class="dv">2</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">2000</span><span class="op">*</span><span class="dv">99</span><span class="op">^</span><span class="dv">2</span><span class="op">-</span><span class="dv">444</span></code></pre></div>
<pre><code>## [1] 19601556</code></pre>
<p>Estas operaciones no se guardan en el espacio de trabajo. Al igual que cuando se usa una calculadora sin guardar un resultado en su memoria, al momento de producir el resultado se pierde la operación.</p>
</div>
<div id="asignacion-de-objetos-en-r" class="section level3">
<h3><span class="header-section-number">2.4.2</span> Asignación de objetos en R</h3>
<p>Para almacenar un resultado en el espacio de trabajo de R es necesario asignarlo a un objeto. Las asignaciones en R tienen siempre la misma forma:</p>
<center>
<strong>nombre_del_objeto &lt;- valor</strong>
</center>
<p>Por ejemplo puedes asignar una de las operaciones anteriores a un objeto en R.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">operacion_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="dv">2</span><span class="op">+</span><span class="dv">2</span></code></pre></div>
<p>Escribir el nombre del objeto en la consola es equivalente a pregunarle a R ¿Qué hay en ese objeto?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">operacion_<span class="dv">1</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<p>Es buena práctica ponerle nombres informativos a los objetos que estamos generando. Recomendamos usar la nomenclatura llamada <strong>snake_case</strong> que se refiere a separar las palabras del nombre de tu objeto con un “_“.</p>
<p>Construyamos otro objeto que guarda el resultado de una operación.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">esta_operacion_es_sumamente_larga &lt;-<span class="st"> </span><span class="dv">2</span><span class="op">+</span><span class="dv">2</span><span class="op">^</span><span class="dv">21</span><span class="op">*</span><span class="dv">2183176321</span><span class="op">/</span>(<span class="dv">22</span><span class="op">+</span><span class="fl">2.56</span><span class="op">^</span><span class="dv">121</span>)<span class="op">+</span><span class="dv">11111</span></code></pre></div>
<p>RStudio tiene una herramienta de autocompletado de nombres, si escribes en la consola únicamente “esta” y aprietas la tecla Tab debe completar el nombre del objeto anterior.</p>
</div>
<div id="funciones-en-r" class="section level3">
<h3><span class="header-section-number">2.4.3</span> Funciones en R</h3>
<p>Los comandos que se utilizaron la clase pasada para graficar se llaman funciones. Las funciones en R tienen la forma:</p>
<center>
<strong>nombre_de_la_función(argumento1=valor1,argumento2=valor2,…)</strong>
</center>
<p>El nombre de la función indica a R qué función se debe ejecutar. Cada función tiene asociada una lista de argumentos que le permiten saber a R qué le estás pidiendo que haga.</p>
<p>Como un primer ejemplo, la instalación de paquetes en R se puede llevar a cabo usando una función: install.packages(). Lo mínimo que necesita R para poder instalar un paquete es cuál debe instalar. Por esto el uso de esta función es simplemente install.packages(pkgs=“nombre_del_paquete”).</p>
<p>También debemos recordar que el símbolo “?” junto a una función nos permite acceder a la ayuda de R sobre la misma.</p>
<p>Estudiemos ahora la función seq(), pueden escribir ?seq para ver la ayuda sobre esta función. Esta genera secuencias de números, por ejemplo para generar la secuencia de números enteros del 1 al 100 basta con escribir:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">seq</span>(<span class="dt">from=</span><span class="dv">1</span>,<span class="dt">to=</span><span class="dv">100</span>)</code></pre></div>
<pre><code>##   [1]   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17
##  [18]  18  19  20  21  22  23  24  25  26  27  28  29  30  31  32  33  34
##  [35]  35  36  37  38  39  40  41  42  43  44  45  46  47  48  49  50  51
##  [52]  52  53  54  55  56  57  58  59  60  61  62  63  64  65  66  67  68
##  [69]  69  70  71  72  73  74  75  76  77  78  79  80  81  82  83  84  85
##  [86]  86  87  88  89  90  91  92  93  94  95  96  97  98  99 100</code></pre>
<p>Una observación útil es que el autocompletado de RStudio ¡sirve también para funciones! Intenta escribir “se” en la consola y luego oprimir la tecla Tab. Deberá aparecer un recuadro con un listado de opciones.</p>
<p><img src="imagenes/2_function_tab.png" width="234" /></p>
<p>Escribir una letra más (e.g. “q”) reduce la lista de opciones y la función seq deberá ya ser visible en ellas. Luego basta con oprimir la tecla Enter para elegir la función seq.</p>
<p>El resultado de utilizar una función se puede también asignar a un objeto. Esto será de gran utilidad a la hora de trabajar en R.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">secuencia_del_1_al_<span class="dv">100</span> &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dt">from=</span><span class="dv">1</span>,<span class="dt">to=</span><span class="dv">100</span>)</code></pre></div>
<p>En la sección superior derecha de nuestro ambiente de RStudio ya deben existir dos objetos cargados en el espacio de trabajo: “esta_operacion_es_sumamente_larga” y “secuencia_del_1_al_100”. Estos ya están cargados en la memoria RAM de la computadora y R puede acceder a ellos cuando se les solicite utilizando su nombre.</p>
<p><img src="imagenes/3_espacio_trabajo.png" width="451" /></p>
<p><img src="imagenes/manicule2.jpg" /> ¿Por qué no funciona el siguiente código? Modifícalo hasta que cada instrucción funcione.</p>
<p>library(tidyverse)</p>
<p>ggplot(dota = mpg) + geom_point(mapping = aes(x = displ, y = hwy))</p>
<p>fliter(mpg, cyl = 8)</p>
<p>filter(diamond, carat &gt; 3)</p>
</div>
<div id="scripts-en-r" class="section level3">
<h3><span class="header-section-number">2.4.4</span> Scripts en R</h3>
<p>Se puede escribir código de R en cualquier procesador de texto, por ejemplo en word. La conveniencia de tener un procesador de texto dentro de tu ambiente de trabajo (RStudio) es que te permite mandar las instrucciones diréctamente a la consola para su ejecución.</p>
<p>En un script el símbolo # le indica a R que esa línea es un comentario. Los comentarios no se ejecutan y sirven para tener notas para nosotros mismos sobre el código que estamos desarrollando. Cuando una línea de texto es un comentario, será de color verde.</p>
<p><img src="imagenes/4_primer_script.png" width="504" /></p>
<p>Para ejecutar el código que se encuentra en un script se pueden utilizar las teclas: Ctrl/Cmd (mac) + Enter o el botón “Run” que se encuentra en la esquina superior derecha de la ventana de scripts. En un script puedes correr una línea en particular (primero la eliges con el mouse, botón izquierdo). También puedes correr una selección de tu script, para esto sólo debes elegir una sección de tu código dejando apretado el botón derecho del mouse o con la tecla shift y las flechas del teclado; análogo a como se hace en word.</p>
</div>
<div id="diagnosticos-de-rstudio" class="section level3">
<h3><span class="header-section-number">2.4.5</span> Diagnósticos de RStudio</h3>
<p>Como se sabe que R es tan moléstamente quisquilloso, RStudio tiene integrado un detector de errores de sintaxis.</p>
<p>Un error tremendamente común es que siempre que se abran paréntesis, se deben cerrar (). Por ejemplo a la hora de usar alguna función. Si RStudio detecta que en una línea hay paréntesis sin pareja la marcará con una cruz roja.</p>
<p><img src="imagenes/5_unmatched_bracket.png" width="502" /></p>
<p>Por supuesto existen muchísimos posibles errores en R. Si se comete alguno RStudio tratará de informarte sobre la naturaleza del error, basta con colocar el puntero del mouse sobre la cruz roja para ver esta nota.</p>
</div>
<div id="operadores-relacionales" class="section level3">
<h3><span class="header-section-number">2.4.6</span> Operadores relacionales</h3>
<p>Sirven para comparar dos cantidades. Regresan <strong>TRUE</strong> si la comparación es cierta y <strong>FALSE</strong> en otro caso.</p>
<p>Ejemplos:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">5</span> <span class="op">==</span><span class="st"> </span><span class="dv">5</span> <span class="co"># Notar que se pone doble igualdad para comparar dos cantidades</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">5</span> <span class="op">&gt;</span><span class="st"> </span><span class="dv">6</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">5</span> <span class="op">&lt;</span><span class="st"> </span><span class="dv">6</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">6</span> <span class="op">&gt;=</span><span class="st"> </span><span class="dv">3</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">6</span> <span class="op">&lt;=</span><span class="st"> </span><span class="fl">3.4</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Otro operador muy útil para ver si un elemento se encuentra en un vector</span>
<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>) <span class="co"># Formando un vector que contiene los números 1, 2, 3</span></code></pre></div>
<pre><code>## [1] 1 2 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">5</span> <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">2</span> <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</code></pre></div>
<pre><code>## [1] TRUE</code></pre>
</div>
<div id="operadores-booleanos" class="section level3">
<h3><span class="header-section-number">2.4.7</span> Operadores booleanos</h3>
<p>Sirven para comparar dos expresiones como las anteriores:</p>
<p>El operador <strong>y</strong> (&amp;) regresa verdadero si las dos expresiones que recibe son verdaderas y falso en otro caso.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(<span class="dv">5</span> <span class="op">&gt;</span><span class="st"> </span><span class="dv">6</span>) <span class="op">&amp;</span><span class="st"> </span>(<span class="dv">7</span> <span class="op">&lt;</span><span class="st"> </span><span class="dv">8</span>) <span class="co"># Y: notar que regresa false porque 5 &gt; 6 es falso</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(<span class="dv">5</span> <span class="op">&lt;</span><span class="st"> </span><span class="dv">6</span>) <span class="op">&amp;</span><span class="st"> </span>(<span class="dv">7</span> <span class="op">&lt;</span><span class="st"> </span><span class="dv">8</span>)</code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(<span class="dv">5</span> <span class="op">&gt;</span><span class="st"> </span><span class="dv">6</span>) <span class="op">&amp;</span><span class="st"> </span>(<span class="dv">7</span> <span class="op">&gt;</span><span class="st"> </span><span class="dv">8</span>)</code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>El operador <strong>o</strong> (|) regresa verdadero si <strong>alguna</strong> de las expresiones que recibe es verdadera y falso en otro caso.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(<span class="dv">5</span> <span class="op">&gt;</span><span class="st"> </span><span class="dv">6</span>) <span class="op">|</span><span class="st"> </span>(<span class="dv">7</span> <span class="op">&lt;</span><span class="st"> </span><span class="dv">8</span>) <span class="co"># O: notar que regresa true conque alguna de las expresiones sea verdadera</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(<span class="dv">5</span> <span class="op">&lt;</span><span class="st"> </span><span class="dv">6</span>) <span class="op">|</span><span class="st"> </span>(<span class="dv">7</span> <span class="op">&lt;</span><span class="st"> </span><span class="dv">8</span>)</code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(<span class="dv">5</span> <span class="op">&gt;</span><span class="st"> </span><span class="dv">6</span>) <span class="op">|</span><span class="st"> </span>(<span class="dv">7</span> <span class="op">&gt;</span><span class="st"> </span><span class="dv">8</span>)</code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>El operador lógico <strong>no</strong> (! regresa verdadero si la expresión que recibe es falsa y viceversa)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">5</span> <span class="op">&gt;</span><span class="st"> </span><span class="dv">6</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="op">!</span>(<span class="dv">5</span> <span class="op">&gt;</span><span class="st"> </span><span class="dv">6</span>)</code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p><img src="imagenes/manicule2.jpg" /> Evalúa una a una las siguientes expresiones y explica por qué da TRUE o FALSE. Sugerencia: compréndelas una a una y en orden.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">5</span> <span class="op">&lt;</span><span class="st"> </span><span class="dv">7</span>
<span class="op">!</span>(<span class="dv">5</span> <span class="op">&lt;</span><span class="st"> </span><span class="dv">7</span>)
<span class="dv">5</span> <span class="op">&gt;</span><span class="st"> </span><span class="dv">6</span>
<span class="dv">6</span> <span class="op">&lt;=</span><span class="st"> </span><span class="dv">6</span>
<span class="dv">6</span> <span class="op">&gt;=</span><span class="st"> </span><span class="dv">6</span>
<span class="op">!</span>(<span class="dv">5</span> <span class="op">&lt;</span><span class="st"> </span><span class="dv">7</span>) <span class="op">&amp;</span><span class="st"> </span>(<span class="dv">5</span> <span class="op">&gt;</span><span class="st"> </span><span class="dv">6</span>)
(<span class="op">!</span>(<span class="dv">5</span> <span class="op">&lt;</span><span class="st"> </span><span class="dv">7</span>) <span class="op">&amp;</span><span class="st"> </span>(<span class="dv">5</span> <span class="op">&gt;</span><span class="st"> </span><span class="dv">6</span>)) <span class="op">|</span><span class="st"> </span>(<span class="dv">6</span> <span class="op">&lt;=</span><span class="st"> </span><span class="dv">6</span>)
<span class="op">!</span>(<span class="dv">5</span> <span class="op">&lt;</span><span class="st"> </span><span class="dv">7</span>) <span class="op">&amp;</span><span class="st"> </span>((<span class="dv">5</span> <span class="op">&gt;</span><span class="st"> </span><span class="dv">6</span>) <span class="op">|</span><span class="st"> </span>(<span class="dv">6</span> <span class="op">&lt;=</span><span class="st"> </span><span class="dv">6</span>))</code></pre></div>
</div>
</div>
<div id="el-paquete-dplyr-instalado-con-el-tidyverse" class="section level2">
<h2><span class="header-section-number">2.5</span> El paquete dplyr (instalado con el tidyverse)</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Cargando el paquete</span>
<span class="kw">library</span>(<span class="st">&quot;tidyverse&quot;</span>)</code></pre></div>
<pre><code>## ── Attaching packages ───────────</code></pre>
<pre><code>## ✔ ggplot2 2.2.1     ✔ purrr   0.2.4
## ✔ tibble  1.4.2     ✔ dplyr   0.7.4
## ✔ tidyr   0.8.0     ✔ stringr 1.3.0
## ✔ readr   1.1.1     ✔ forcats 0.3.0</code></pre>
<pre><code>## ── Conflicts ────────────────────
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()</code></pre>
<p>Un data frame se compone de <strong>registros</strong> (renglones) y <strong>campos o variables</strong> (columnas):</p>
<div class="figure">
<img src="imagenes/campos_registros.jpg" />

</div>
<p>Con <strong>dplyr</strong> se podrán realizar acciones muy útiles como las siguientes:</p>
<ol style="list-style-type: decimal">
<li><strong>Seleccionar</strong> campos de un data frame</li>
<li><strong>Filtrar</strong> registros de un data frame que cumplan cierta condición.</li>
<li><strong>Ordenar</strong> registros de acurdo a su valor en ciertos campos.</li>
<li><strong>Crear</strong> nuevas columnas a partir de los valores de las preexistentes</li>
<li><strong>Calcular resúmenes</strong> de <strong>agregados</strong> de datos (como las tablas dinámicas en Excel).</li>
<li><strong>Unir tablas</strong> de acuerdo a sus valores en ciertos campos (se verá más adelante).</li>
</ol>
<div id="seleccionar-campos-de-un-data-frame-selectdf-columnas_a_seleccionar" class="section level3">
<h3><span class="header-section-number">2.5.1</span> 1. Seleccionar campos de un data frame: select(df, columnas_a_seleccionar)</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Usaremos el data frame diamonds cargado con &quot;tidyverse&quot;</span>
<span class="kw">glimpse</span>(diamonds)</code></pre></div>
<pre><code>## Observations: 53,940
## Variables: 10
## $ carat   &lt;dbl&gt; 0.23, 0.21, 0.23, 0.29, 0.31, 0.24, 0.24, 0.26, 0.22, ...
## $ cut     &lt;ord&gt; Ideal, Premium, Good, Premium, Good, Very Good, Very G...
## $ color   &lt;ord&gt; E, E, E, I, J, J, I, H, E, H, J, J, F, J, E, E, I, J, ...
## $ clarity &lt;ord&gt; SI2, SI1, VS1, VS2, SI2, VVS2, VVS1, SI1, VS2, VS1, SI...
## $ depth   &lt;dbl&gt; 61.5, 59.8, 56.9, 62.4, 63.3, 62.8, 62.3, 61.9, 65.1, ...
## $ table   &lt;dbl&gt; 55, 61, 65, 58, 58, 57, 57, 55, 61, 61, 55, 56, 61, 54...
## $ price   &lt;int&gt; 326, 326, 327, 334, 335, 336, 336, 337, 337, 338, 339,...
## $ x       &lt;dbl&gt; 3.95, 3.89, 4.05, 4.20, 4.34, 3.94, 3.95, 4.07, 3.87, ...
## $ y       &lt;dbl&gt; 3.98, 3.84, 4.07, 4.23, 4.35, 3.96, 3.98, 4.11, 3.78, ...
## $ z       &lt;dbl&gt; 2.43, 2.31, 2.31, 2.63, 2.75, 2.48, 2.47, 2.53, 2.49, ...</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># View(diamonds) # Para ver el data frame en formato de Excel.</span>

diamonds_columnas_selectas &lt;-<span class="st"> </span><span class="kw">select</span>(diamonds, carat, cut)
diamonds_columnas_selectas</code></pre></div>
<pre><code>## # A tibble: 53,940 x 2
##    carat cut      
##    &lt;dbl&gt; &lt;ord&gt;    
##  1 0.23  Ideal    
##  2 0.21  Premium  
##  3 0.23  Good     
##  4 0.290 Premium  
##  5 0.31  Good     
##  6 0.24  Very Good
##  7 0.24  Very Good
##  8 0.26  Very Good
##  9 0.22  Fair     
## 10 0.23  Very Good
## # ... with 53,930 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Otras maneras de seleccionar columnas:</span>
<span class="kw">select</span>(diamonds, <span class="kw">starts_with</span>(<span class="st">&quot;c&quot;</span>))</code></pre></div>
<pre><code>## # A tibble: 53,940 x 4
##    carat cut       color clarity
##    &lt;dbl&gt; &lt;ord&gt;     &lt;ord&gt; &lt;ord&gt;  
##  1 0.23  Ideal     E     SI2    
##  2 0.21  Premium   E     SI1    
##  3 0.23  Good      E     VS1    
##  4 0.290 Premium   I     VS2    
##  5 0.31  Good      J     SI2    
##  6 0.24  Very Good J     VVS2   
##  7 0.24  Very Good I     VVS1   
##  8 0.26  Very Good H     SI1    
##  9 0.22  Fair      E     VS2    
## 10 0.23  Very Good H     VS1    
## # ... with 53,930 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">select</span>(diamonds, <span class="kw">contains</span>(<span class="st">&quot;able&quot;</span>))</code></pre></div>
<pre><code>## # A tibble: 53,940 x 1
##    table
##    &lt;dbl&gt;
##  1    55
##  2    61
##  3    65
##  4    58
##  5    58
##  6    57
##  7    57
##  8    55
##  9    61
## 10    61
## # ... with 53,930 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">select</span>(diamonds, <span class="op">-</span>carat, <span class="op">-</span>cut, <span class="op">-</span>color)</code></pre></div>
<pre><code>## # A tibble: 53,940 x 7
##    clarity depth table price     x     y     z
##    &lt;ord&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 SI2      61.5    55   326  3.95  3.98  2.43
##  2 SI1      59.8    61   326  3.89  3.84  2.31
##  3 VS1      56.9    65   327  4.05  4.07  2.31
##  4 VS2      62.4    58   334  4.2   4.23  2.63
##  5 SI2      63.3    58   335  4.34  4.35  2.75
##  6 VVS2     62.8    57   336  3.94  3.96  2.48
##  7 VVS1     62.3    57   336  3.95  3.98  2.47
##  8 SI1      61.9    55   337  4.07  4.11  2.53
##  9 VS2      65.1    61   337  3.87  3.78  2.49
## 10 VS1      59.4    61   338  4     4.05  2.39
## # ... with 53,930 more rows</code></pre>
<p><img src="imagenes/manicule2.jpg" /> Crea un data frame nuevo a partir de diamonds con las columnas carat, x, y, z únicamente.</p>
</div>
<div id="filtrar-registros-de-un-data-frame-que-cumplen-cierta-condicion-filterdf-condiciones" class="section level3">
<h3><span class="header-section-number">2.5.2</span> 2. Filtrar registros de un data frame que cumplen cierta condición: filter(df, condiciones)</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">diamonds_registros_selectos &lt;-<span class="st"> </span><span class="kw">filter</span>(diamonds, cut <span class="op">==</span><span class="st"> &quot;Ideal&quot;</span>, x <span class="op">&gt;</span><span class="st"> </span><span class="dv">4</span>)
diamonds_registros_selectos</code></pre></div>
<pre><code>## # A tibble: 21,449 x 10
##    carat cut   color clarity depth table price     x     y     z
##    &lt;dbl&gt; &lt;ord&gt; &lt;ord&gt; &lt;ord&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1  0.31 Ideal J     SI2      62.2    54   344  4.35  4.37  2.71
##  2  0.3  Ideal I     SI2      62      54   348  4.31  4.34  2.68
##  3  0.33 Ideal I     SI2      61.8    55   403  4.49  4.51  2.78
##  4  0.33 Ideal I     SI2      61.2    56   403  4.49  4.5   2.75
##  5  0.33 Ideal J     SI1      61.1    56   403  4.49  4.55  2.76
##  6  0.32 Ideal I     SI1      60.9    55   404  4.45  4.48  2.72
##  7  0.3  Ideal I     SI2      61      59   405  4.3   4.33  2.63
##  8  0.35 Ideal I     VS1      60.9    57   552  4.54  4.59  2.78
##  9  0.3  Ideal D     SI1      62.5    57   552  4.29  4.32  2.69
## 10  0.3  Ideal D     SI1      62.1    56   552  4.3   4.33  2.68
## # ... with 21,439 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Otras maneras de filtrar registros</span>
<span class="kw">filter</span>(diamonds, cut <span class="op">==</span><span class="st"> &quot;Ideal&quot;</span> <span class="op">&amp;</span><span class="st"> </span>x <span class="op">&gt;</span><span class="st"> </span><span class="dv">4</span>)</code></pre></div>
<pre><code>## # A tibble: 21,449 x 10
##    carat cut   color clarity depth table price     x     y     z
##    &lt;dbl&gt; &lt;ord&gt; &lt;ord&gt; &lt;ord&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1  0.31 Ideal J     SI2      62.2    54   344  4.35  4.37  2.71
##  2  0.3  Ideal I     SI2      62      54   348  4.31  4.34  2.68
##  3  0.33 Ideal I     SI2      61.8    55   403  4.49  4.51  2.78
##  4  0.33 Ideal I     SI2      61.2    56   403  4.49  4.5   2.75
##  5  0.33 Ideal J     SI1      61.1    56   403  4.49  4.55  2.76
##  6  0.32 Ideal I     SI1      60.9    55   404  4.45  4.48  2.72
##  7  0.3  Ideal I     SI2      61      59   405  4.3   4.33  2.63
##  8  0.35 Ideal I     VS1      60.9    57   552  4.54  4.59  2.78
##  9  0.3  Ideal D     SI1      62.5    57   552  4.29  4.32  2.69
## 10  0.3  Ideal D     SI1      62.1    56   552  4.3   4.33  2.68
## # ... with 21,439 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">filter</span>(diamonds, cut <span class="op">==</span><span class="st"> &quot;Ideal&quot;</span> <span class="op">|</span><span class="st"> </span>x <span class="op">&gt;</span><span class="st"> </span><span class="dv">4</span>)</code></pre></div>
<pre><code>## # A tibble: 53,546 x 10
##    carat cut       color clarity depth table price     x     y     z
##    &lt;dbl&gt; &lt;ord&gt;     &lt;ord&gt; &lt;ord&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 0.23  Ideal     E     SI2      61.5    55   326  3.95  3.98  2.43
##  2 0.23  Good      E     VS1      56.9    65   327  4.05  4.07  2.31
##  3 0.290 Premium   I     VS2      62.4    58   334  4.2   4.23  2.63
##  4 0.31  Good      J     SI2      63.3    58   335  4.34  4.35  2.75
##  5 0.26  Very Good H     SI1      61.9    55   337  4.07  4.11  2.53
##  6 0.3   Good      J     SI1      64      55   339  4.25  4.28  2.73
##  7 0.23  Ideal     J     VS1      62.8    56   340  3.93  3.9   2.46
##  8 0.31  Ideal     J     SI2      62.2    54   344  4.35  4.37  2.71
##  9 0.32  Premium   E     I1       60.9    58   345  4.38  4.42  2.68
## 10 0.3   Ideal     I     SI2      62      54   348  4.31  4.34  2.68
## # ... with 53,536 more rows</code></pre>
<p><img src="imagenes/manicule2.jpg" /> Crea un data frame nuevo a partir de diamonds que contenga los registros que cumplen la condición: ‘<strong>alguna</strong> de x, y, z es mayor a 3.5’</p>
</div>
<div id="ordenar-registros-de-un-data-frame-por-los-valores-en-una-o-mas-variables-arrangedf-variables_de_ordenamiento" class="section level3">
<h3><span class="header-section-number">2.5.3</span> 3. Ordenar registros de un data frame por los valores en una o más variables: arrange(df, variables_de_ordenamiento)</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">diamonds_ordenado &lt;-<span class="st"> </span><span class="kw">arrange</span>(diamonds, carat, depth)
diamonds_ordenado</code></pre></div>
<pre><code>## # A tibble: 53,940 x 10
##    carat cut     color clarity depth table price     x     y     z
##    &lt;dbl&gt; &lt;ord&gt;   &lt;ord&gt; &lt;ord&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1   0.2 Premium E     VS2      59      60   367  3.81  3.78  2.24
##  2   0.2 Premium E     VS2      59.7    62   367  3.84  3.8   2.28
##  3   0.2 Ideal   E     VS2      59.7    55   367  3.86  3.84  2.3 
##  4   0.2 Premium E     VS2      59.8    62   367  3.79  3.77  2.26
##  5   0.2 Premium E     SI2      60.2    62   345  3.79  3.75  2.27
##  6   0.2 Premium E     VS2      61.1    59   367  3.81  3.78  2.32
##  7   0.2 Ideal   D     VS2      61.5    57   367  3.81  3.77  2.33
##  8   0.2 Premium D     VS2      61.7    60   367  3.77  3.72  2.31
##  9   0.2 Ideal   E     VS2      62.2    57   367  3.76  3.73  2.33
## 10   0.2 Premium D     VS2      62.3    60   367  3.73  3.68  2.31
## # ... with 53,930 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># desc(variable): ordena en sentido decreciente (Z-A), (mayor a menor, etc)</span>
<span class="kw">arrange</span>(diamonds, carat, <span class="kw">desc</span>(depth))</code></pre></div>
<pre><code>## # A tibble: 53,940 x 10
##    carat cut       color clarity depth table price     x     y     z
##    &lt;dbl&gt; &lt;ord&gt;     &lt;ord&gt; &lt;ord&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1   0.2 Very Good E     VS2      63.4    59   367  3.74  3.71  2.36
##  2   0.2 Premium   F     VS2      62.6    59   367  3.73  3.71  2.33
##  3   0.2 Premium   D     VS2      62.3    60   367  3.73  3.68  2.31
##  4   0.2 Ideal     E     VS2      62.2    57   367  3.76  3.73  2.33
##  5   0.2 Premium   D     VS2      61.7    60   367  3.77  3.72  2.31
##  6   0.2 Ideal     D     VS2      61.5    57   367  3.81  3.77  2.33
##  7   0.2 Premium   E     VS2      61.1    59   367  3.81  3.78  2.32
##  8   0.2 Premium   E     SI2      60.2    62   345  3.79  3.75  2.27
##  9   0.2 Premium   E     VS2      59.8    62   367  3.79  3.77  2.26
## 10   0.2 Premium   E     VS2      59.7    62   367  3.84  3.8   2.28
## # ... with 53,930 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">arrange</span>(diamonds, <span class="kw">desc</span>(carat), depth)</code></pre></div>
<pre><code>## # A tibble: 53,940 x 10
##    carat cut       color clarity depth table price     x     y     z
##    &lt;dbl&gt; &lt;ord&gt;     &lt;ord&gt; &lt;ord&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1  5.01 Fair      J     I1       65.5    59 18018 10.7  10.5   6.98
##  2  4.5  Fair      J     I1       65.8    58 18531 10.2  10.2   6.72
##  3  4.13 Fair      H     I1       64.8    61 17329 10     9.85  6.43
##  4  4.01 Premium   I     I1       61      61 15223 10.1  10.1   6.17
##  5  4.01 Premium   J     I1       62.5    62 15223 10.0   9.94  6.24
##  6  4    Very Good I     I1       63.3    58 15984 10.0   9.94  6.31
##  7  3.67 Premium   I     I1       62.4    56 16193  9.86  9.81  6.13
##  8  3.65 Fair      H     I1       67.1    53 11668  9.53  9.48  6.38
##  9  3.51 Premium   J     VS2      62.5    59 18701  9.66  9.63  6.03
## 10  3.5  Ideal     H     I1       62.8    57 12587  9.65  9.59  6.03
## # ... with 53,930 more rows</code></pre>
<p><img src="imagenes/manicule2.jpg" /> Crea un data frame nuevo a partir de diamonds que contenga los registros organizados alfabéticamente por “color”“, y por”carat&quot; de manera descendente.</p>
</div>
<div id="crear-nuevas-variables-mutatedf-formulas" class="section level3">
<h3><span class="header-section-number">2.5.4</span> 4. Crear nuevas variables: mutate(df, formulas)</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">diamonds_nueva_variable &lt;-<span class="st"> </span><span class="kw">mutate</span>(diamonds, <span class="dt">dollars_per_carat =</span> price <span class="op">/</span><span class="st"> </span>carat)</code></pre></div>
<p><img src="imagenes/manicule2.jpg" /> Crea un data frame nuevo a partir de diamonds que contenga la variable “dollars_per_carat” anterior, y la variable “product” calculada como <span class="math inline">\(x \times\)</span> y <span class="math inline">\(\times z\)</span>.</p>
</div>
<div id="agrupar-por-ciertas-variables-group_bydata_frame-variables-y-crear-resumenes-por-grupo-summarisedata_frame-formulas" class="section level3">
<h3><span class="header-section-number">2.5.5</span> 5. Agrupar por ciertas variables: group_by(data_frame, variables) y crear resúmenes por grupo: summarise(data_frame, formulas)</h3>
<ul>
<li>Para crear resúmenes de un data frame se utiliza la función <strong>summarise</strong>.</li>
<li>Si se agrupan los datos antes (utilizando la función <strong>group_by</strong>), se pueden crear resúmenes por nivel de las variables de agregación (definidas en el group_by). Esto es análogo a las tablas dinámicas en Excel.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Calcular el promedio de depth y la mediana de price y asignarlos a las</span>
<span class="co"># variables &quot;promedio_depth&quot; y &quot;mediana_price&quot;</span>
diamonds_resumen &lt;-<span class="st"> </span><span class="kw">summarise</span>(diamonds, <span class="dt">promedio_depth =</span> <span class="kw">mean</span>(depth), <span class="dt">mediana_price =</span> <span class="kw">median</span>(price))
diamonds_resumen</code></pre></div>
<pre><code>## # A tibble: 1 x 2
##   promedio_depth mediana_price
##            &lt;dbl&gt;         &lt;dbl&gt;
## 1           61.7          2401</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Calcular el promedio de depth y la mediana de price y asignarlos a las variables</span>
<span class="co"># &quot;promedio_depth&quot; y &quot;mediana_price&quot;, por nivel de &quot;cut&quot;</span>
<span class="co"># Primero agrupo por la variable de interés</span>
diamonds_agrupado &lt;-<span class="st"> </span><span class="kw">group_by</span>(diamonds, cut)
diamonds_agrupado</code></pre></div>
<pre><code>## # A tibble: 53,940 x 10
## # Groups:   cut [5]
##    carat cut       color clarity depth table price     x     y     z
##    &lt;dbl&gt; &lt;ord&gt;     &lt;ord&gt; &lt;ord&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 0.23  Ideal     E     SI2      61.5    55   326  3.95  3.98  2.43
##  2 0.21  Premium   E     SI1      59.8    61   326  3.89  3.84  2.31
##  3 0.23  Good      E     VS1      56.9    65   327  4.05  4.07  2.31
##  4 0.290 Premium   I     VS2      62.4    58   334  4.2   4.23  2.63
##  5 0.31  Good      J     SI2      63.3    58   335  4.34  4.35  2.75
##  6 0.24  Very Good J     VVS2     62.8    57   336  3.94  3.96  2.48
##  7 0.24  Very Good I     VVS1     62.3    57   336  3.95  3.98  2.47
##  8 0.26  Very Good H     SI1      61.9    55   337  4.07  4.11  2.53
##  9 0.22  Fair      E     VS2      65.1    61   337  3.87  3.78  2.49
## 10 0.23  Very Good H     VS1      59.4    61   338  4     4.05  2.39
## # ... with 53,930 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Y calculo resúmenes para cada nivel de dicha variable</span>
diamonds_resumen_por_grupo &lt;-<span class="st"> </span><span class="kw">summarise</span>(diamonds_agrupado, <span class="dt">promedio_depth =</span> <span class="kw">mean</span>(depth), <span class="dt">mediana_price =</span> <span class="kw">median</span>(price))
diamonds_resumen_por_grupo</code></pre></div>
<pre><code>## # A tibble: 5 x 3
##   cut       promedio_depth mediana_price
##   &lt;ord&gt;              &lt;dbl&gt;         &lt;dbl&gt;
## 1 Fair                64.0         3282 
## 2 Good                62.4         3050.
## 3 Very Good           61.8         2648 
## 4 Premium             61.3         3185 
## 5 Ideal               61.7         1810</code></pre>
<p>Algunos resúmenes útiles con <em>summarise</em> son:</p>
<ul>
<li>El mínimo de un campo x: <strong>min(x)</strong></li>
<li>La mediana de un campo x: <strong>median(x)</strong></li>
<li>El máximo de un campo x: <strong>max(x)</strong></li>
<li>El número de registros: <strong>n()</strong></li>
<li>La suma de un campo x: <strong>sum(x)</strong></li>
<li>La desviación estándar de un campo x: <strong>sd(x)</strong>.</li>
</ul>
<p><img src="imagenes/manicule.jpg" /> <strong>Tarea:</strong> Crea un data frame nuevo a partir de diamonds que contenga el número de registros para cada combinación de valores en las variables “cut” y “color”.</p>
<p><img src="imagenes/manicule.jpg" /> <strong>Tarea:</strong> Explica las diferencias que notas entre los data frames obtenidos de:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">diamonds_agrupado &lt;-<span class="st"> </span><span class="kw">group_by</span>(diamonds, cut)
resultado_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">summarise</span>(diamonds_agrupado, <span class="dt">promedio_depth =</span> <span class="kw">mean</span>(depth))
resultado_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">mutate</span>(diamonds_agrupado, <span class="dt">promedio_depth =</span> <span class="kw">mean</span>(depth))</code></pre></div>
<p><img src="imagenes/manicule.jpg" /> <strong>Tarea:</strong> Partiendo del data frame diamonds, crea un data frame nuevo con las siguientes características:</p>
<ol style="list-style-type: decimal">
<li><p>Contenga la variable dollars_per_carat = price / carat</p></li>
<li><p>Contenga sólo aquellos registros que cumplen dollars_per_carat &lt; 4000</p></li>
<li><p>Esté ordenado en orden descendente por la variable dollars_per_carat</p></li>
</ol>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="transformacion-ii.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/clase-3.Rmd",
"text": "Edit"
},
"download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
